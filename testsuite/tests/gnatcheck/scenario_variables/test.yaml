# This test is to assert that subprojects are taken into account by rules:
# even though we run it on `root_prj.gpr`, "same_instantiations" will find a
# rule violation in a source of `dep_prj.gpr` (meaning `select` queries such
# as can be found in "same_instantiations.lkql:insts` correctly consider units
# from subprojects, but also the same violation will be found the other way
# around, meaning the GNATcheck driver explicitly chooses to process all units
# from projects and subprojects.

driver: gnatcheck
project: prj.gpr
rules:
  - +Rimplicit_in_mode_parameters
tests:
  - scenario_variables:
      SRC_DIR: src_1
  - scenario_variables:
      SRC_DIR: src_2
  - scenario_variables:
      SRC_DIR: invalid
