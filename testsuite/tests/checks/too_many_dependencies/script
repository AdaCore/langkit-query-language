let maxDeps = 5

// Fix bug: the bindings set in the first subpattern of a chained pattern
// are not properly handled.
let result =
    query CompilationUnit(any c@children: Identifier(parent: WithClause))
            body
                l@LibraryItem
        when val deps = [x | x <- c, x.referenced_decl() != l.semantic_parent()];
             deps.length > maxDeps

print(result)
