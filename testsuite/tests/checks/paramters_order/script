let result: List =
    query p@ParamSpec(any nextSiblings:
                          sib@ParamSpec when priority(sib) > priority(p)
          )

print(result)

fun priority(paramSpec) =
    if paramSpec.default_expr != null then 0
    else match paramSpec.mode
            | ModeOut     => 1
            | ModeInOut   => 2
            | ModeIn      => 3
            | ModeDefault => 3