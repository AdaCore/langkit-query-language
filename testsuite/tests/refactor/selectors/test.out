# lkql version: 2

fun parents(this : Any) : Any = match this {
    case AdaNode => this :: parents(this.parent)
    case _ => Unit()
}


fun super_types(this : Any) : Any = match this {
    case BaseTypeDecl => this.p_base_types().iterator ::: this.p_base_types().iterator.flatMap(super_types)
    case _            => Unit()
}


fun children(this : Any) : Any = match this {
    case AdaNode => this :: this.children.iterator.flatMap(children)
    case _ => Unit()
}


fun foo(this : Any) : Any = match this {
    case Foo => [s, o, m, e, t, h, i, n, g].iterator ::: foo(this)
}


|" Infinite sequence generator
fun infinite_sequence(this : Any) : Any = match this {
    case nb => nb :: # Recurse with value nb + 1
        infinite_sequence(nb + 1)
}


